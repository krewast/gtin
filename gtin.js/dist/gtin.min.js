/*! gtin.js 07-09-2015 */
function GtinFormatError(a){"use strict";var b=Error.apply(this,arguments);this.message=a||null,this.name=b.name="GtinFormatError",b.stack&&(this.stack=b.stack.substring(b.stack.indexOf("\n")+1)),this.toString=function(){return null!==a?name+": "+a:name}}function GtinFormat(a){"use strict";this.length=a,this.toString=function(){return"GTIN-"+a.toString()}}function Gtin(a){"use strict";this.gtin=a,this.format=GtinFormat.forLength(a.length),this.length=this.format.length,this.checkDigit=function(){return parseInt(this.gtin.substring(a.length-1))},this.digitAt=function(a){return parseInt(this.gtin.substring(a,a+1))},this.toString=function(){return a},this.equals=function(b){return b===this||b instanceof Gtin&&a===b.gtin},this.hashCode=function(){var b=function(a){var b=0;for(i=0;i<a.length;i++){var c=a.charCodeAt(i);b=(b<<5)-b+c,b&=b}return b};return 37+b(a)}}if(GtinFormatError.prototype=Object.create(Error.prototype),GtinFormat.GTIN_8=new GtinFormat(8),GtinFormat.GTIN_12=new GtinFormat(12),GtinFormat.GTIN_13=new GtinFormat(13),GtinFormat.GTIN_14=new GtinFormat(14),GtinFormat.values=function(){"use strict";return{GTIN_8:GtinFormat.GTIN_8,GTIN_12:GtinFormat.GTIN_12,GTIN_13:GtinFormat.GTIN_13,GTIN_14:GtinFormat.GTIN_14}},GtinFormat.valueOf=function(a){var b=GtinFormat.values();for(var c in b)if(c==a)return b[c];throw new RangeError("Name '"+a+"' does not match the name of any known GTIN formats")},GtinFormat.forLength=function(a){"use strict";var b=GtinFormat.values();for(var c in b){var d=b[c];if(a==d.length)return d}throw new RangeError("Length '"+a+"' does not match the length of any known GTIN formats")},Object.freeze){Object.freeze(GtinFormat);var values=GtinFormat.values();for(var i in values){var gtinFormat=values[i];Object.freeze(gtinFormat)}}Gtin.create=function(a){"use strict";if(!Gtin.isValid(a))throw new GtinFormatError("String '"+a+"' is not a valid gtin");var b=new Gtin(a);return Object.freeze&&Object.freeze(b),b},Gtin.createWithCheckDigit=function(a){"use strict";return new Gtin(Gtin.withCheckDigit(a))},Gtin.isValid=function(a,b){"use strict";if(!Gtin.matchesFormat(a))return!1;var c=a.length;if("undefined"!=typeof b&&null!==b&&c!=b.length)return!1;for(var d=0,e=c%2,f=0;c>f;f++){var g=f%2==e?3:1;d+=parseInt(a.substring(f,f+1))*g}return d%10===0},Gtin.isValid8=function(a){"use strict";return Gtin.isValid(a,GtinFormat.GTIN_8)},Gtin.isValid12=function(a){"use strict";return Gtin.isValid(a,GtinFormat.GTIN_12)},Gtin.isValid13=function(a){"use strict";return Gtin.isValid(a,GtinFormat.GTIN_13)},Gtin.isValid14=function(a){"use strict";return Gtin.isValid(a,GtinFormat.GTIN_14)},Gtin.calculateCheckDigit=function(a){"use strict";if(!Gtin.matchesFormat(a,null,1))throw new GtinFormatError("String '"+a+"' is not a valid partial gtin");for(var b=0,c=a.length,d=(c+1)%2,e=0;c>e;e++){var f=e%2==d?3:1;b+=parseInt(a.substring(e,e+1))*f}return b%10===0?0:10-b%10},Gtin.withCheckDigit=function(a){"use strict";return a+Gtin.calculateCheckDigit(a).toString()},Gtin.matchesFormat=function(a,b,c){"use strict";if("undefined"==typeof a||null===a)throw new Error("gtin is null");("undefined"==typeof c||null===c)&&(c=0);var d=a.length,e=!1;if("undefined"!=typeof b&&null!==b)e=d==b.length;else{var f=GtinFormat.values();for(var g in f){var h=f[g];if(d==h.length-c){e=!0;break}}}return e?null!==a.match(/^[0-9]+$/):!1},Gtin.matchesFormat8=function(a){"use strict";return Gtin.matchesFormat(a,GtinFormat.GTIN_8,0)},Gtin.matchesFormat12=function(a){"use strict";return Gtin.matchesFormat(a,GtinFormat.GTIN_12,0)},Gtin.matchesFormat13=function(a){"use strict";return Gtin.matchesFormat(a,GtinFormat.GTIN_13,0)},Gtin.matchesFormat14=function(a){"use strict";return Gtin.matchesFormat(a,GtinFormat.GTIN_14,0)},function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.returnExports=b()}(this,function(){return{GTIN:Gtin,GTINFormat:GtinFormat,InvalidGTINError:GtinFormatError}});