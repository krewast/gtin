/*! gtin.js 07-09-2015 */
function InvalidGTINError(a){"use strict";var b=Error.apply(this,arguments);this.message=a||null,this.name=b.name="InvalidGTINError",b.stack&&(this.stack=b.stack.substring(b.stack.indexOf("\n")+1)),this.toString=function(){return null!==a?name+": "+a:name}}function GTINFormat(a){"use strict";this.length=a,this.toString=function(){return"GTIN-"+a.toString()}}function GTIN(a){"use strict";this.gtin=a,this.format=GTINFormat.forLength(a.length),this.length=this.format.length,this.checkDigit=function(){return parseInt(this.gtin.substring(a.length-1))},this.digitAt=function(a){return parseInt(this.gtin.substring(a,a+1))},this.toString=function(){return a},this.equals=function(b){return b===this||b instanceof GTIN&&a===b.gtin},this.hashCode=function(){var b=function(a){var b=0;for(i=0;i<a.length;i++)char=a.charCodeAt(i),b=(b<<5)-b+char,b&=b;return b};return 37+b(a)}}if(InvalidGTINError.prototype=Object.create(Error.prototype),GTINFormat.GTIN_8=new GTINFormat(8),GTINFormat.GTIN_12=new GTINFormat(12),GTINFormat.GTIN_13=new GTINFormat(13),GTINFormat.GTIN_14=new GTINFormat(14),GTINFormat.values=function(){"use strict";return{GTIN_8:GTINFormat.GTIN_8,GTIN_12:GTINFormat.GTIN_12,GTIN_13:GTINFormat.GTIN_13,GTIN_14:GTINFormat.GTIN_14}},GTINFormat.valueOf=function(a){var b=GTINFormat.values();for(var c in b)if(c==a)return b[c];throw new RangeError("Name '"+a+"' does not match the name of any known GTIN formats")},GTINFormat.forLength=function(a){"use strict";var b=GTINFormat.values();for(var c in b){var d=b[c];if(a==d.length)return d}throw new RangeError("Length '"+a+"' does not match the length of any known GTIN formats")},Object.freeze){Object.freeze(GTINFormat);var values=GTINFormat.values();for(var i in values){var gtinFormat=values[i];Object.freeze(gtinFormat)}}GTIN.create=function(a){"use strict";if(!GTIN.isValid(a))throw new InvalidGTINError("String '"+a+"' is not a valid gtin");var b=new GTIN(a);return Object.freeze&&Object.freeze(b),b},GTIN.createWithCheckDigit=function(a){"use strict";return new GTIN(GTIN.withCheckDigit(a))},GTIN.isValid=function(a,b){"use strict";if(!GTIN.matchesFormat(a))return!1;var c=a.length;if("undefined"!=typeof b&&null!==b&&c!=b.length)return!1;for(var d=0,e=c%2,f=0;c>f;f++){var g=f%2==e?3:1;d+=parseInt(a.substring(f,f+1))*g}return d%10===0},GTIN.isValid8=function(a){"use strict";return GTIN.isValid(a,GTINFormat.GTIN_8)},GTIN.isValid12=function(a){"use strict";return GTIN.isValid(a,GTINFormat.GTIN_12)},GTIN.isValid13=function(a){"use strict";return GTIN.isValid(a,GTINFormat.GTIN_13)},GTIN.isValid14=function(a){"use strict";return GTIN.isValid(a,GTINFormat.GTIN_14)},GTIN.calculateCheckDigit=function(a){"use strict";if(!GTIN.matchesFormat(a,null,1))throw new InvalidGTINError("String '"+a+"' is not a valid partial gtin");for(var b=0,c=a.length,d=(c+1)%2,e=0;c>e;e++){var f=e%2==d?3:1;b+=parseInt(a.substring(e,e+1))*f}return b%10===0?0:10-b%10},GTIN.withCheckDigit=function(a){"use strict";return a+GTIN.calculateCheckDigit(a).toString()},GTIN.matchesFormat=function(a,b,c){"use strict";if("undefined"==typeof a||null===a)throw new Error("gtin is null");("undefined"==typeof c||null===c)&&(c=0);var d=a.length,e=!1;if("undefined"!=typeof b&&null!==b)e=d==b.length;else{var f=GTINFormat.values();for(var g in f){var h=f[g];if(d==h.length-c){e=!0;break}}}return e?null!==a.match(/^[0-9]+$/):!1},GTIN.matchesFormat8=function(a){"use strict";return GTIN.matchesFormat(a,GTINFormat.GTIN_8,0)},GTIN.matchesFormat12=function(a){"use strict";return GTIN.matchesFormat(a,GTINFormat.GTIN_12,0)},GTIN.matchesFormat13=function(a){"use strict";return GTIN.matchesFormat(a,GTINFormat.GTIN_13,0)},GTIN.matchesFormat14=function(a){"use strict";return GTIN.matchesFormat(a,GTINFormat.GTIN_14,0)},function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.returnExports=b()}(this,function(){return{GTIN:GTIN,GTINFormat:GTINFormat,InvalidGTINError:InvalidGTINError}});